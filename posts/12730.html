<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="树莓派入坑指南, DaNing的博客"><meta name="description" content="DaNing的个人博客."><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>树莓派入坑指南 | DaNing的博客</title><link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/medias/favicon.png"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/awesome/css/all.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/materialize/materialize.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/aos/aos.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/css/matery.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/css/my.css"><script src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/jquery/jquery.min.js"></script><meta name="generator" content="Hexo 4.2.1"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"><link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><img src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/medias/logo.png" class="logo-img" alt="LOGO"> <span class="logo-span">DaNing的博客</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fas fa-tags" style="zoom:.6"></i> <span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fas fa-bookmark" style="zoom:.6"></i> <span>分类</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/about" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fas fa-comments" style="zoom:.6"></i> <span>留言板</span></a></li><li class="hide-on-med-and-down nav-item"><a href="" class="waves-effect waves-light"><i class="fas fa-tools" style="zoom:.6"></i> <span>工具</span> <i class="fas fa-chevron-down" aria-hidden="true" style="zoom:.6"></i></a><ul class="sub-nav menus_item_child"><li><a href="/shortcut"><i class="fas fa-rocket" style="margin-top:-20px;zoom:.6"></i> <span>导航(待完善)</span></a></li><li><a href="/helpyoubaidu"><i class="fas fa-wheelchair" style="margin-top:-20px;zoom:.6"></i> <span>帮你百度</span></a></li></ul></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/medias/logo.png" class="logo-img circle responsive-img"><div class="logo-name">DaNing的博客</div><div class="logo-desc">DaNing的个人博客.</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fa-fw fas fa-tags"></i> 标签</a></li><li class="m-nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fa-fw fas fa-bookmark"></i> 分类</a></li><li class="m-nav-item"><a href="/about" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fa-fw fas fa-comments"></i> 留言板</a></li><li class="m-nav-item"><a href="javascript:;"><i class="fa-fw fas fa-tools"></i> 工具 <span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/shortcut" style="margin-left:75px"><i class="fa fas fa-rocket" style="position:absolute;left:50px"></i> <span>导航(待完善)</span></a></li><li><a href="/helpyoubaidu" style="margin-left:75px"><i class="fa fas fa-wheelchair" style="position:absolute;left:50px"></i> <span>帮你百度</span></a></li></ul></li></ul></div></div></nav></header><script src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/cryptojs/crypto-js.min.js"></script><script></script><div class="bg-cover pd-header post-cover" style="background-image:url(https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/medias/featureimages/16.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">树莓派入坑指南</h1></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/tocbot/tocbot.css"><style>#articleContent h1::before,#articleContent h2::before,#articleContent h3::before,#articleContent h4::before,#articleContent h5::before,#articleContent h6::before{display:block;content:" ";height:100px;margin-top:-100px;visibility:hidden}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{width:345px;padding-left:20px}.toc-widget .toc-title{margin:35px 0 15px 0;padding-left:17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content{height:calc(100vh - 250px);overflow:auto}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px;position:absolute;right:23.5vw;display:block}#toc-content .is-active-link{color:#42b983}#floating-toc-btn{position:fixed;right:15px;bottom:76px;padding-top:15px;margin-bottom:0;z-index:998}#floating-toc-btn .btn-floating{width:48px;height:48px}#floating-toc-btn .btn-floating i{line-height:48px;font-size:1.4rem}</style><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"><span class="chip bg-color">树莓派</span> </a><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="chip bg-color">深度学习</span> </a><a href="/tags/%E9%80%89%E8%B4%AD%E6%8C%87%E5%8D%97/"><span class="chip bg-color">选购指南</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E5%B0%8F%E7%8E%A9%E6%84%8F%E5%84%BF/" class="post-category">小玩意儿</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp; 2020-07-22</div><div class="post-date info-break-policy"><i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp; 2022-03-27</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp; 3k</div><div class="info-break-policy"><i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp; 12 分</div></div></div><hr class="clearfix"><div class="card-content article-card-content"><div id="articleContent"><h1 id="树莓派入坑指南"><a href="#树莓派入坑指南" class="headerlink" title="树莓派入坑指南"></a>树莓派入坑指南</h1><h2 id="配件购买"><a href="#配件购买" class="headerlink" title="配件购买"></a>配件购买</h2><p>最好不要一起套装, 自己组一套可以比店里的套装划算很多.</p><h3 id="主板"><a href="#主板" class="headerlink" title="主板"></a>主板</h3><p>树莓派4B和3B+具有差不多的价格, 但是4B明显性能提升还是挺明显的所以直接买4B</p><h3 id="SD卡-读卡器"><a href="#SD卡-读卡器" class="headerlink" title="SD卡+读卡器"></a>SD卡+读卡器</h3><p>16/32/64GB都可以, 现在情况16和32的价格差不多, 空间翻一倍, 买32G足够. 据说空间更大的可能导致树莓派无法开机.</p><h3 id="风扇-外壳"><a href="#风扇-外壳" class="headerlink" title="风扇+外壳"></a>风扇+外壳</h3><p>没有必要买官方原装或者是金属的外壳, 直接买亚克力板的外壳就行, 最好配备风扇, 夏天这玩意跑起来实在是吃不消.</p><h3 id="充电器"><a href="#充电器" class="headerlink" title="充电器"></a>充电器</h3><p>树莓派4B官方说用5V3A的type-c充电器, 比3B+的要高了0.5A. 充电器最好是买带开关的, 因为树莓派的type-c口拔拔插插的很麻烦, 一个开关可以节省很多事情.</p><h3 id="散热片"><a href="#散热片" class="headerlink" title="散热片"></a>散热片</h3><p>虽然说官方不建议给CPU配备散热片, 但是散热片也没几块钱, 就买了一小套.</p><h3 id="摄像头"><a href="#摄像头" class="headerlink" title="摄像头"></a>摄像头</h3><p>那种配置很高的摄像头没必要, 就买500W像素的就够. 就算你图像质量再高, 到DL模型时候还是需要reshape成更低像素的数据, 只是说图像质量高后提供更多的信息, 如果是跑小项目应该没必要. 我觉得买的24块钱的摄像头就足够.</p><p>摄像头测试指令:</p><pre class="line-numbers language-bash"><code class="language-bash">raspistill -o image.jpg<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="飞鼠"><a href="#飞鼠" class="headerlink" title="飞鼠"></a>飞鼠</h3><p>也就是那种可触控式的鼠标和键盘, 好像挺装逼的, 可以买一个来玩玩, 暂时没啥必要.</p><h2 id="烧录系统"><a href="#烧录系统" class="headerlink" title="烧录系统"></a>烧录系统</h2><ol><li>下载Imager和系统镜像现在树莓派官网有更方便的Raspberry imager了, 也就是更方便的SD卡烧录软件. 去官网可以下载</li></ol><p><a href="https://www.raspberrypi.org/downloads/" target="_blank" rel="noopener">https://www.raspberrypi.org/downloads/</a></p><blockquote><p>系统中建议用Raspbian, NOOBS会占用很多没有必要的空间.</p></blockquote><ol start="2"><li><p>先将读卡器插入SD卡中, 然后把USB读卡器插到电脑上</p></li><li><p>如果SD卡是新的可以不用清除, 若是旧的则先要用Imager进行卡的擦除.</p></li><li><p>下载完镜像<code>.zip</code>后进行解压, 然后打开Imager选择解压完的<code>.img</code>文件和你的SD卡进行系统烧录.</p></li><li><p>安装后打开boot盘(不要看错盘符)</p></li><li><p>在boot下新建一个名为<code>ssh</code>的文件, 没有任何后缀, 这样可以在树莓派没开机的情况下开启SSH.</p></li><li><p>同在boot下新建一个名为<code>wpa_supplicant.conf</code>的文件, 其内容如下</p><pre><code>country=GB
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
network={
    ssid=&quot;你的wifi名字&quot;
    psk=&quot;你的wifi密码&quot;
    priority=你想设的优先级大小, 数字越大越优先
}</code></pre></li></ol><ol start="8"><li>安全退出SD卡, 并将SD卡怼入树莓派SD卡插槽中, 准备树莓派的开机之旅.</li></ol><h2 id="开机过程"><a href="#开机过程" class="headerlink" title="开机过程"></a>开机过程</h2><h3 id="两种指示灯"><a href="#两种指示灯" class="headerlink" title="两种指示灯"></a>两种指示灯</h3><blockquote><p>树莓派有两个指示灯, 一个是红灯, 一个是绿灯.</p><p>红灯是电源指示灯, 红灯常亮说明电源接通正常, 若红灯闪烁说明电源质量不佳, 可能是功率问题, 也可能是接触不良等.</p><p>绿灯是读写指示灯, 可以通过绿灯闪烁情况观察到储存卡的读写情况.</p></blockquote><p>给树莓派接上电源, 观察到红灯常亮, 绿灯闪烁非常频繁, 这说明树莓派供电良好, 正在初始化系统.正常情况下树莓派4B2G在5分钟以内一定会完成第一次初始化. <strong>当树莓派连入前面设置的wifi后, 初始化就完成了.</strong> 接下来就需要找到树莓派的IP, 用电脑和它进行SSH连接.</p><h3 id="找到树莓派地址"><a href="#找到树莓派地址" class="headerlink" title="找到树莓派地址"></a>找到树莓派地址</h3><p>找到ip地址有很多种花样, 只要会其中一种就行了</p><ol><li><p>通过wifi寻找</p><p>既然树莓派开机默认连上了wifi, 说明树莓派系统初始化已经完成. 直接登录wifi的管理界面就能看到所有设备信息, 能很容易地找到一台刚加入网络的设备, 肯定是树莓派, 记录下它的ip地址.</p><blockquote><p>如果不知道自己家路由器ip, 在cmd里敲ipconfig能看到本机网卡的网关, 那个就是路由器地址.</p></blockquote></li><li><p>ARP查询</p><pre class="line-numbers language-bash"><code class="language-bash">arp -a<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>找到所有的动态IP然后一一排除. 其实与上述办法基本一致.</p></li><li><p>局域网扫描</p><p>这个网上有很多软件一抓一大把. 也是与前两种方法一样.</p></li></ol><h3 id="SSH连接"><a href="#SSH连接" class="headerlink" title="SSH连接"></a>SSH连接</h3><p>用putty可以轻松完成连接功能, 在连接的IP中输入刚才找到的ip, 端口号默认是22不要动, 会弹出一个命令行</p><p><strong>填入用户名pi, 密码raspberry</strong>就能连接到树莓派上了, 若出现命令行变色, 且路径发生变化说明连接成功.</p><h3 id="用Windows远程桌面连接树莓派"><a href="#用Windows远程桌面连接树莓派" class="headerlink" title="用Windows远程桌面连接树莓派"></a>用Windows远程桌面连接树莓派</h3><ul><li><p>安装xrdp和VNC</p><blockquote><p>Xrdp是一个开源工具，允许用户通过Windows RDP访问Linux远程桌面。 除了Windows RDP之外，xrdp工具还接受来自其他RDP客户端的连接，如FreeRDP，rdesktop和NeutrinoRDP。 Xrdp现在支持TLS安全层。</p></blockquote><blockquote><p>VNC(Virtual Network Console)是虚拟网络控制台的缩写。它 是一款优秀的远程控制工具软件，由著名的 AT&amp;T 的欧洲研究实验室开发的。VNC 是在基于 UNIX 和 Linux 操作系统的免费的开源软件，远程控制能力强大，高效实用，其性能可以和 Windows 和 MAC 中的任何远程控制软件媲美。</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> xrdp
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> tightvncserver<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>将xrdp启动和添加默认项</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> /etc/init.d/xrdp start
<span class="token function">sudo</span> update-rc.d xrdp defaults<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>然后用Windows自带的远程连接, 连接树莓派ip即可, 账号密码同前.</p></li></ul><h3 id="用VNCViewer连接树莓派"><a href="#用VNCViewer连接树莓派" class="headerlink" title="用VNCViewer连接树莓派"></a>用VNCViewer连接树莓派</h3><ol><li><p>首先要在电脑中下载VNCviewer</p></li><li><p>在树莓派终端中输入<code>sudo raspi-config</code>, 选择<strong>Interfacing options</strong>, 找到VNC的设置将其打开.</p></li><li><p>用VNCViewer连接树莓派ip, 账号密码同前.</p><blockquote><p>若出现当前桌面无法显示的黑屏情况<code>cannot currently show the desktop</code>, 请在树莓派设置中将<strong>Advanced options</strong>找到分辨率(Resolution)调高, 反正不是默认的就行.</p></blockquote></li></ol><h3 id="用TeamViewer连接树莓派"><a href="#用TeamViewer连接树莓派" class="headerlink" title="用TeamViewer连接树莓派"></a>用TeamViewer连接树莓派</h3><p>坑 待填</p><h3 id="树莓派的关机和重启"><a href="#树莓派的关机和重启" class="headerlink" title="树莓派的关机和重启"></a>树莓派的关机和重启</h3><ul><li><p>树莓派关机</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">shutdown</span> -h now<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>树莓派重启</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">reboot</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h2 id="系统配置"><a href="#系统配置" class="headerlink" title="系统配置"></a>系统配置</h2><h3 id="将接口配置打开"><a href="#将接口配置打开" class="headerlink" title="将接口配置打开"></a>将接口配置打开</h3><p>在<code>raspi-config</code>的<code>Interfacing options</code>中, 有很多功能选项都可以打开.</p><blockquote><p>Camera：摄像头</p><p>SSH：ssh远程通信与登陆</p><p>VNC：VNC远程桌面登陆</p><p>Serial：串口控制</p><p>Remote GPIO：远程GPIO引脚控制</p></blockquote><h3 id="给apt-get换源"><a href="#给apt-get换源" class="headerlink" title="给apt-get换源"></a>给apt-get换源</h3><p>在终端中输入:</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/apt/sources.list<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后用上下左右控制光标, 将唯一有效的默认网址加<code>#</code>注释掉, 然后在最下面加上:</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 编辑 `/etc/apt/sources.list` 文件，删除原文件所有内容，用以下内容取代：</span>
deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib
deb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>按<strong>ctrl+o</strong>提交改动, 再按回车保存, 按<strong>ctrl+x</strong>退出nano.</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 编辑 `/etc/apt/sources.list.d/raspi.list` 文件，删除原文件所有内容，用以下内容取代：</span>
deb http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ buster main ui<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="给pip换源"><a href="#给pip换源" class="headerlink" title="给pip换源"></a>给pip换源</h3><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">mkdir</span> ~/.pip
<span class="token function">cd</span> .pip
<span class="token function">sudo</span> <span class="token function">nano</span> pip.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>在pip.conf里输入以下内容</p><pre><code>[global]
timeout = 10
index-url =  http://mirrors.aliyun.com/pypi/simple/
extra-index-url= http://pypi.douban.com/simple/
[install]
trusted-host=
    mirrors.aliyun.com
    pypi.douban.com</code></pre><p>保存方式同上.</p><h3 id="切换Python版本"><a href="#切换Python版本" class="headerlink" title="切换Python版本"></a>切换Python版本</h3><p>树莓派默认的python版本是2.7, 但是大多数人早在用python3了, 所以应该及时切换到最新版本</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> update-alternatives --install /usr/bin/python python /usr/bin/python2 100
<span class="token function">sudo</span> update-alternatives --install /usr/bin/python python /usr/bin/python3 150<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>如果要切换回python2.7可以用如下指令</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> update-alternatives --config python<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="配置中文系统"><a href="#配置中文系统" class="headerlink" title="配置中文系统"></a>配置中文系统</h3><ul><li><p>先装个中文输入法和字体</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> fonts-wqy-zenhei
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> fcitx fcitx-googlepinyin fcitx-module-cloudpinyin fcitx-sunpinyin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>可以使用<code>ctrl</code>+<code>空格</code>切换为中文输入法.</p></li></ul><p>说实话中文linux太捞了, 只建议把时区改回中国, 均为<code>sudo raspi-config</code>的<strong>Localisation Options</strong>中的设置</p><ul><li><strong>Change Locale</strong> 可以更改国家, 等到光标达到zh_CN.UTF-8 UTF-8时按空格, 然后选择默认区域为zh_CN.UTF-8可以改为中文(真的很捞).</li><li><strong>Change Timezone __可以更改时区, 选择</strong>Asia__, <strong>Shanghai</strong>即为中国时间.</li><li>__Change Wi-fi Country __ 选择wifi国家, CN China为中国.</li></ul><h2 id="安装OpenCV-神坑"><a href="#安装OpenCV-神坑" class="headerlink" title="安装OpenCV(神坑)"></a>安装OpenCV(神坑)</h2><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>首先要在<code>raspi-config</code>中的<code>Advanced Options</code>中的第一个选项<code>Expand Filesystem Ensures...</code>将文件系统的空间扩展至整个SD卡. 之后重启, 重启后用<code>df -h</code>查看磁盘是否已经扩展.</p><p>如果空间不够, 可以用删除缓存的方法扩大一些空间</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> purge wolfram-engine
<span class="token function">sudo</span> <span class="token function">apt-get</span> purge libreoffice*
<span class="token function">sudo</span> <span class="token function">apt-get</span> clean
<span class="token function">sudo</span> <span class="token function">apt-get</span> autoremove<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>在这之后要例行更新一下系统.</p><h3 id="安装各种准备库"><a href="#安装各种准备库" class="headerlink" title="安装各种准备库"></a>安装各种准备库</h3><pre class="line-numbers language-bash"><code class="language-bash">//安装Cmake等编译openCV源码的工具
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> build-essential cmake <span class="token function">git</span> pkg-config 

// 安装常用图像工具包
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libjpeg-dev libtiff5-dev libjasper-dev libpng12-dev

// 安装视频操作的包
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libavcodec-dev libavformat-dev libswscale-dev libv4l-dev  
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libxvidcore-dev libx264-dev

// openCV用于图像/GUI展示的功能依赖highgui模块，为了编译它我们需要安装libgtk2.0-dev
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libgtk2.0-dev

// 安装OpenCV数值优化函数包
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libatlas-base-dev gfortran

// 安装构建Python扩展所需要的头文件
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> python2.7-dev python3-dev

// 如果缺少其他依赖, 尝试安装下述两个包
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libhdf5-dev
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libqt4-test<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="下载Opencv"><a href="#下载Opencv" class="headerlink" title="下载Opencv"></a>下载Opencv</h3><p>一个是Opencv的zip, 还有一个是Opencv_contrib的zip. 经过很多折腾和摸索, 最后发现4.1.0的版本在CMake时编译不会产生错误, 所以最后选择了4.1.0版本.</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">wget</span> -O opencv-4.1.0.zip https://github.com/Itseez/opencv/archive/4.1.0.zip
<span class="token function">wget</span> -O opencv_contrib-4.1.0.zip https://github.com/Itseez/opencv_contrib/archive/4.1.0.zip<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="设置交换空间"><a href="#设置交换空间" class="headerlink" title="设置交换空间"></a>设置交换空间</h3><p>这个交换空间是在内存不够用的时候, 将磁盘空间充当内存空间的方法. 分配太多的Swap空间会浪费磁盘, 甚至对SD卡造成损坏且减少寿命, 一般设置在2G一下. 但是因为编译可能会占用很多的内存, 所以短时间增大Swap空间的大小是可以的.</p><p><code>sudo nano /etc/dphys-swapfile</code>将<code>CONF_SWAPSIZE</code>改为2048</p><p><code>sudo /etc/init.d/dphys-swapfile stop</code></p><p><code>sudo /etc/init.d/dphys-swapfile start</code></p><p>这样才能重启交换服务.</p><p><strong>千万不要忘记在安装完后把它改回来.</strong></p><h3 id="编译过程"><a href="#编译过程" class="headerlink" title="编译过程"></a>编译过程</h3><p>对<code>opencv-4.1.0.zip</code>和<code>opencv_contrib-4.1.0.zip</code>两个文件进行解压</p><pre class="line-numbers language-bash"><code class="language-bash">unzip opencv_contrib-4.1.0.zip
unzip opencv-4.1.0.zip<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>然后切换至``opencv-4.1.0<code>这个文件夹, 并在其下面新建编译文件准备存放的目录</code>build`</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">cd</span> ~/opencv-4.1.0/
<span class="token function">mkdir</span> build <span class="token operator">&amp;</span> <span class="token function">cd</span> build<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>然后开始进行编译的配置</p><pre class="line-numbers language-bash"><code class="language-bash">cmake -D ENABLE_PRECOMPILED_HEADERS<span class="token operator">=</span>OFF \ -D CMAKE_BUILD_TYPE<span class="token operator">=</span>RELEASE \ -D CMAKE_INSTALL_PREFIX<span class="token operator">=</span>/usr/local \ -D INSTALL_PYTHON_EXAMPLES<span class="token operator">=</span>ON \ -D OPENCV_EXTRA_MODULES_PATH<span class="token operator">=</span>~/opencv_contrib-4.1.0/modules \ -D BUILD_EXAMPLES<span class="token operator">=</span>ON <span class="token punctuation">..</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>如果遇到BUG<br><code>fatal error: opencv2/xfeatures2d/cuda.hpp: No such file or directory include “opencv2/xfeatures2d/cuda.hpp”</code></p><p><strong>解决办法：</strong><br>在CMakeLists.txt增加以下内容：</p><p><code>INCLUDE_DIRECTORIES(&quot;你的opencv_contrib路径/modules/xfeatures2d/include&quot;)</code></p><p>CMakeLists.txt文件所在路径为：</p><p><code>你的opencv路径/modules/stitching/CMakeLists.txt</code></p></blockquote><p>下面开始编译, 这个过程十分漫长, 可以加上参数<code>-j4</code>让四个线程同时跑, 如果对自己机器没有信心也可以不加, 编译失败的话可以尝试去掉<code>-j4</code>这个参数直接make. __请注意命令中的opencv_contrib-4.1.0文件夹的位置是否和解压的位置相符.</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">make</span> -j4 
<span class="token function">make</span> <span class="token function">install</span> 
<span class="token function">make</span> ldconfig<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>大功告成, 接下来就可以测试你的摄像头好不好使了.</p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>打开<code>Thoony</code>, 以下是测试摄像头的代码, 如果没有摄像头只需要在终端里面进入python, 然后import cv2看看是否报错即可.</p><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> cv2

cap <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
cap<span class="token punctuation">.</span>set<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">640</span><span class="token punctuation">)</span>
cap<span class="token punctuation">.</span>set<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">480</span><span class="token punctuation">)</span>

<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    ret<span class="token punctuation">,</span> frame <span class="token operator">=</span> cap<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'frame'</span><span class="token punctuation">,</span> frame<span class="token punctuation">)</span>

    k <span class="token operator">=</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xff</span>
    <span class="token keyword">if</span> k <span class="token operator">==</span> <span class="token number">27</span><span class="token punctuation">:</span>
        <span class="token keyword">break</span>

cap<span class="token punctuation">.</span>release<span class="token punctuation">(</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者: </i></span><span class="reprint-info"><a href="/about" rel="external nofollow noreferrer">DaNing</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接: </i></span><span class="reprint-info"><a href="https://ADAning.github.io/posts/12730.html">https://ADAning.github.io/posts/12730.html</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明: </i></span><span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="/about" target="_blank">DaNing</a> !</span></div></div><script async defer>function navToReprintStatement(){$("html, body").animate({scrollTop:$("#reprint-statement").offset().top-80},800)}document.addEventListener("copy",function(t){M.toast({html:'<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>'})})</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"><span class="chip bg-color">树莓派</span> </a><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="chip bg-color">深度学习</span> </a><a href="/tags/%E9%80%89%E8%B4%AD%E6%8C%87%E5%8D%97/"><span class="chip bg-color">选购指南</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="qq,wechat,weibo" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/share/js/social-share.min.js"></script></div></div></div></div></div><style>.mvaline-card{margin:1.5rem auto}.mvaline-card .card-content{padding:20px 20px 5px 20px}</style><div class="card mvaline-card" data-aos="fade-up"><div class="comment_headling" style="font-size:20px;font-weight:700;position:relative;padding-left:20px;top:15px;padding-bottom:5px"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div id="mvcomments" class="card-content" style="display:grid"></div></div><script src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/minivaline/MiniValine.min.js"></script><script>new MiniValine({el:"#mvcomments",appId:"M2K91TQqrwW698jR08LdugNz-gzGzoHsz",appKey:"b04G08nTf4B3kqCfOOY1urvC",mode:"xCss",placeholder:"评论暂不支持Latex公式, 但支持Markdown语法.",pathname:window.location.pathname,lang:"",adminEmailMd5:"ebbfbc84f11742e41a94a4e64b1d37ab",tagMeta:["管理员","小伙伴","访客"],master:["ebbfbc84f11742e41a94a4e64b1d37ab"],friends:["b5bd5d836c7a0091aa8473e79ed4c25e","adb7d1cd192658a55c0ad22a3309cecf","3ce1e6c77b4910f1871106cb30dc62b0","cfce8dc43725cc14ffcd9fb4892d5bfc"],math:!1,md:!0,enableQQ:!0,NoRecordIP:!1,visitor:!1,maxNest:6,pageSize:12,serverURLs:"",emoticonUrl:["https://cdn.jsdelivr.net/npm/alus@latest","https://cdn.jsdelivr.net/gh/MiniValine/qq@latest","https://cdn.jsdelivr.net/gh/MiniValine/Bilibilis@latest","https://cdn.jsdelivr.net/gh/MiniValine/tieba@latest","https://cdn.jsdelivr.net/gh/MiniValine/twemoji@latest","https://cdn.jsdelivr.net/gh/MiniValine/weibo@latest"]})</script><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i>&nbsp;上一篇</div><div class="card"><a href="/posts/7425.html"><div class="card-image"><img src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/medias/featureimages/23.jpg" class="responsive-img" alt="计算机网络-学校"> <span class="card-title">计算机网络-学校</span></div></a><div class="card-content article-content"><div class="summary block-with-text">本篇后半部分内容产生格式错乱和渲染错误, 是Ipad导出时所产生的格式混乱所致, 现已无法全部修改, 请转看另一篇计网内容. Chapter 1 Computer Networks and the Internet (about 10%</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2020-07-22 </span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" class="post-category">计算机基础</a></span></div></div><div class="card-action article-tags"><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><span class="chip bg-color">计算机网络</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">本篇&nbsp;<i class="far fa-dot-circle"></i></div><div class="card"><a href="/posts/12730.html"><div class="card-image"><img src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/medias/featureimages/16.jpg" class="responsive-img" alt="树莓派入坑指南"> <span class="card-title">树莓派入坑指南</span></div></a><div class="card-content article-content"><div class="summary block-with-text">树莓派入坑指南配件购买最好不要一起套装, 自己组一套可以比店里的套装划算很多. 主板树莓派4B和3B+具有差不多的价格, 但是4B明显性能提升还是挺明显的所以直接买4B SD卡+读卡器16/32/64GB都可以, 现在情况16和32的价格差</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i>2020-07-22 </span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E5%B0%8F%E7%8E%A9%E6%84%8F%E5%84%BF/" class="post-category">小玩意儿</a></span></div></div><div class="card-action article-tags"><a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"><span class="chip bg-color">树莓派</span> </a><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="chip bg-color">深度学习</span> </a><a href="/tags/%E9%80%89%E8%B4%AD%E6%8C%87%E5%8D%97/"><span class="chip bg-color">选购指南</span></a></div></div></div></div></article></div><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/codeBlock/codeBlockFuction.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/codeBlock/codeLang.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/codeBlock/codeCopy.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/codeBlock/codeShrink.js"></script><style type="text/css">code[class*=language-],pre[class*=language-]{white-space:pre!important}</style></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/tocbot/tocbot.min.js"></script><script>$(function(){tocbot.init({tocSelector:"#toc-content",contentSelector:"#articleContent",headingsOffset:-(.4*$(window).height()-45),collapseDepth:Number("0"),headingSelector:"h2, h3, h4"});let t=0,e="toc-heading-",n=($("#toc-content a").each(function(){$(this).attr("href","#"+e+ ++t)}),t=0,$("#articleContent").children("h2, h3, h4").each(function(){$(this).attr("id",e+ ++t)}),parseInt(.4*$(window).height()-64)),o=$(".toc-widget");$(window).scroll(function(){$(window).scrollTop()>n?o.addClass("toc-fixed"):o.removeClass("toc-fixed")});const i="expanded";let c=$("#toc-aside"),a=$("#main-content");$("#floating-toc-btn .btn-floating").click(function(){c.hasClass(i)?(c.removeClass(i).hide(),a.removeClass("l9")):(c.addClass(i).show(),a.addClass("l9"));{let e=$("#artDetail");if(0!==e.length){let t=e.width();450<=t?t+=21:350<=t&&t<450?t+=18:300<=t&&t<350?t+=16:t+=14,$("#prenext-posts").width(t)}return}})})</script></main><footer class="page-footer bg-color"><div class="container row center-align" style="margin-bottom:0!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2020</span> <a href="/about" target="_blank">DaNing</a> |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a> |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">413.5k</span>&nbsp;字 <span id="busuanzi_container_site_pv">|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv" class="white-color"></span>&nbsp;次 </span><span id="busuanzi_container_site_uv">|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv" class="white-color"></span>&nbsp;人</span><br><br></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/ADAning" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i> </a><a href="mailto:andaning@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i> </a><a href="https://www.zhihu.com/people/nzhu-27" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/nzhu-27" data-position="top" data-delay="50"><i class="fab fa-zhihu1">知</i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/js/search.js"></script><script type="text/javascript">$(function(){searchFunc("https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-angle-double-up"></i></a></div><script src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/materialize/materialize.min.js"></script><script src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/masonry/masonry.pkgd.min.js"></script><script src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/aos/aos.js"></script><script src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/scrollprogress/scrollProgress.min.js"></script><script src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/js/matery.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",(e=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,e)}()</script><script async src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/others/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/gh/ADAning/ADAning.github.io/libs/instantpage/instantpage.js" type="module"></script></body></html>